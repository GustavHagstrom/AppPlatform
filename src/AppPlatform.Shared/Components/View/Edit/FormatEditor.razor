@inject IStringLocalizer<FormatEditor> Localizer

<ToolbarSection Title="@Localizer["Format"]">
    <div class="d-flex gap-2">
        <div class="d-flex flex-column gap-2">
            <div class="d-flex gap-2">

            </div>
            <div class="d-flex gap-2">

            </div>
        </div>
        <div class="d-flex flex-column gap-2">
            <style>
                .NoMarginPls > div {
                    margin: 0!important;
                }
            </style>
            <div class="d-flex gap-2 NoMarginPls">
                <MudTextField T="string" Margin="Margin.Dense" Variant="Variant.Outlined" Placeholder="@Localizer["Teckensnitt"]" Style="width: 200px; height: 36px;"/>
                <MudTextField T="string" Margin="Margin.Dense" Variant="Variant.Outlined" Adornment="Adornment.None" AdornmentIcon="@Icons.Material.Sharp.FormatSize" Style="width: 55px; ; height: 36px;" />
            </div>
            <div class="d-flex gap-2">
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatBold" Style="background-color: var(--mud-palette-action-disabled-background)" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatItalic" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatUnderlined" />
                <MudSpacer/>
                <MudMenu Dense="true" AnchorOrigin="Origin.BottomLeft" TransformOrigin="Origin.TopLeft">
                    <ActivatorContent>
                        <MudIconButton Variant="Variant.Outlined" Color="Color.Primary" Icon="@Icons.Material.Sharp.BorderBottom" />
                    </ActivatorContent>
                    <ChildContent>
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderBottom"/>
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderTop"/>
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderLeft"/>
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderRight"/>
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderClear" />
                   @*      <MudMenuItem Icon="@Icons.Material.Sharp.BorderAll" /> *@
                        <MudMenuItem Icon="@Icons.Material.Sharp.BorderOuter" />
                    </ChildContent>
                </MudMenu>
                <MudMenu >
                    <ActivatorContent>
                        <MudIconButton Variant="Variant.Filled" Color="Color.Primary" Icon="@Icons.Material.Sharp.FormatColorFill" />
                    </ActivatorContent>
                    <ChildContent>
                        <MudColorPicker DisableToolbar="true" DisableColorField="false" DisableModeSwitch="true" DisablePreview="false" DisableAlpha="true" PickerVariant="PickerVariant.Static" />
                    </ChildContent>
                </MudMenu>
                <MudMenu>
                    <ActivatorContent>
                        <MudIconButton Variant="Variant.Filled" Color="Color.Primary" Icon="@Icons.Material.Sharp.FormatColorText" />
                    </ActivatorContent>
                    <ChildContent>
                        <MudColorPicker DisableToolbar="true" DisableColorField="false" DisableModeSwitch="true" DisablePreview="false" DisableAlpha="true" PickerVariant="PickerVariant.Static" />
                    </ChildContent>
                </MudMenu>
                
            </div>
        </div>
        <div class="d-flex flex-column gap-2">
            <div class="d-flex gap-2">
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.VerticalAlignTop" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.VerticalAlignCenter" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.VerticalAlignBottom" />
            </div>
            <div class="d-flex gap-2">
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatAlignLeft" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatAlignCenter" />
                <MudIconButton Variant="Variant.Outlined" Icon="@Icons.Material.Sharp.FormatAlignRight" />
            </div>
        </div>
    </div>
    
</ToolbarSection>

@code{
    [Parameter] public CellFormat? CellFormat { get; set; }
    [Parameter] public EventCallback<CellFormat> CellFormatChanged { get; set; }

    enum Border
    {
        None,
        Bottom,
        Top,
        Left,
        Right,
        All,
        Outer
    }

    Task SetFontFamlity(string font)
    {
        if (CellFormat is not null)
        {
            CellFormat.FontFamily = font;
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    Task SetFontSize(int size)
    {
        if (CellFormat is not null)
        {
            CellFormat.FontSize = size;
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    Task SetIsBold(bool isbold)
    {
        if (CellFormat is not null)
        {
            CellFormat.Bold = isbold;
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    Task SetIsItalic(bool isItalic)
    {
        if (CellFormat is not null)
        {
            CellFormat.Italic = isItalic;
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    Task SetIsUnderlined(bool isUnderlined)
    {
        if (CellFormat is not null)
        {
            CellFormat.Underline = isUnderlined;
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    Task SetBorder(Border border)
    {
        if (CellFormat is not null)
        {
            Action action = border switch
            {
                Border.None => () =>
                {
                    CellFormat.BorderBottom = false;
                    CellFormat.BorderTop = false;
                    CellFormat.BorderLeft = false;
                    CellFormat.BorderRight = false;
                },
                Border.Bottom => () =>
                {
                    CellFormat.BorderBottom = true;
                    CellFormat.BorderTop = false;
                    CellFormat.BorderLeft = false;
                    CellFormat.BorderRight = false;
                }
                ,
                Border.Top => () =>
                {
                    CellFormat.BorderBottom = false;
                    CellFormat.BorderTop = true;
                    CellFormat.BorderLeft = false;
                    CellFormat.BorderRight = false;
                },
                Border.Left => () =>
                {
                    CellFormat.BorderBottom = false;
                    CellFormat.BorderTop = false;
                    CellFormat.BorderLeft = true;
                    CellFormat.BorderRight = false;
                },
                Border.Right => () =>
                {
                    CellFormat.BorderBottom = false;
                    CellFormat.BorderTop = false;
                    CellFormat.BorderLeft = false;
                    CellFormat.BorderRight = true;
                },
                Border.All => () =>
                {
                    CellFormat.BorderBottom = true;
                    CellFormat.BorderTop = true;
                    CellFormat.BorderLeft = true;
                    CellFormat.BorderRight = true;
                },
                Border.Outer => () =>
                {
                    CellFormat.BorderBottom = true;
                    CellFormat.BorderTop = true;
                    CellFormat.BorderLeft = true;
                    CellFormat.BorderRight = true;

                },
                _ => () =>
                {
                    CellFormat.BorderBottom = false;
                    CellFormat.BorderTop = false;
                    CellFormat.BorderLeft = false;
                    CellFormat.BorderRight = false;
                },
            };
            action.Invoke();
            return CellFormatChanged.InvokeAsync(CellFormat);
        }
        return Task.CompletedTask;
    }
    
    
}