
<ImportSettingsEditor Settings="SelectedSettings" />



@code {
    [Inject] public required ISnackbar Snackbar { get; set; }
    [Inject] public required IImportSettingsService ImportSettingsService { get; set; }
    [Parameter, EditorRequired] public required EstimationImportSettings SelectedSettings { get; set; }
    public HashSet<EstimationImportSettings> AllSettings { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        await GetSettingsAsync();
    }
    public async Task GetSettingsAsync()
    {
        await GetStandardSettingsAsync();
        await GetAllSettingsAsync();
        StateHasChanged();
    }
    public async Task GetStandardSettingsAsync()
    {
        try
        {
            var settings = await ImportSettingsService.GetStandardAsync();
            if (settings is not null)
            {
                SelectedSettings = settings;
            }
        }
        catch (Exception e)
        {

            Snackbar.Add($"Standard settings: {e.Message}", Severity.Info);
        }
    }
    public async Task GetAllSettingsAsync()
    {
        AllSettings.Clear();
        try
        {
            var settings = await ImportSettingsService.GetAllAsync();
            foreach (var s in settings)
            {
                AllSettings.Add(s);
            }
        }
        catch (Exception e)
        {

            Snackbar.Add($"Error getting all organization settings: {e.Message}", Severity.Error);
        }
    }
}
