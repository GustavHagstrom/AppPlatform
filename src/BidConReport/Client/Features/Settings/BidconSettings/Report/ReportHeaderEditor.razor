<ExpansionFrame TitleText="@Title">
    <MudStack Spacing="2" Class="pa-4">
        <FontEditor Font="Header.Font" SampleText="@Localizer["Sidhuvudtext"]" />
        <MudTextField @bind-Value="@Header.ValueCode" For="() => Header.ValueCode" Variant="Variant.Outlined" Margin="Margin.Dense" Label="@Localizer["Data"]"
                      Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Sharp.AddLink" AdornmentColor="Color.Primary"
                      OnAdornmentClick="(AddPlaceholder)" />
    </MudStack>
</ExpansionFrame>

@code {
    [Parameter, EditorRequired] public required HeaderDefinition Header { get; set; }
    [Parameter] public string? Title { get; set; }

    [Inject] public required IStringLocalizer<ReportHeaderEditor> Localizer{ get; set; }
    [Inject] public required IDialogService DialogService { get; set; }

    async Task AddPlaceholder()
    {
        var options = new DialogOptions()
            {
                MaxWidth = MaxWidth.ExtraSmall,
                CloseButton = true,
                NoHeader = false,
            };
        var dialog = await DialogService.ShowAsync<EstimationPlaceholderSelectorDialog>(Localizer["Välj"], options);
        var result = await dialog.Result;
        if (!result.Canceled)
        {
            Header.ValueCode += result.Data.ToString()!;
        }

    }
}
