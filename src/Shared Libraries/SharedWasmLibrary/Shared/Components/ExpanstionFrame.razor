@using Microsoft.JSInterop;
<div class="border border-solid" style="border-color: var(--mud-palette-lines-inputs);">

    <div class="border-b border-solid py-2 px-4" style="border-color: var(--mud-palette-lines-inputs);">
        <MudText Typo="Typo.h6" Class="flex-grow-1" Style="pr-4 color: var(--mud-palette-text-primary);">@Title</MudText>
        <MudToggleIconButton Toggled="Expanded"  Icon="@Icons.Material.Sharp.ArrowDownward" ToggledIcon="@Icons.Material.Sharp.ArrowForward" onclick="@Toggle()"/>
    </div>

    <div @ref="ExpansionDiv">
        @ChildContent
    </div>

</div>

@code{
    [Parameter] public string? Title { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public bool Expanded { get; set; } = false;
    [Inject] public required IJSRuntime JSRuntime { get; set; }

    ElementReference ExpansionDiv;

    async Task Toggle()
    {
        Expanded = !Expanded;
    }
}